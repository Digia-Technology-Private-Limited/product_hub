# ProductHub Demo - Comprehensive Digia SDK Integration

A full-featured e-commerce demo app showcasing **all Digia UI SDK integration patterns and use cases**.

## ğŸ¯ What This Demo Covers

This example demonstrates every major SDK integration scenario:

### Integration Patterns (All 3 Modes)
- âœ… **Full Digia App** - Entire UI from Digia Studio
- âœ… **Hybrid Mode** - Native Flutter + Digia pages mixed
- âœ… **Component Embedding** - Digia components in native screens

### Flavors & Init Strategies (Complete Coverage)
- âœ… `Flavor.debug` with branch switching
- âœ… `Flavor.staging` for QA
- âœ… `Flavor.versioned` for A/B testing
- âœ… `Flavor.release` with NetworkFirst / CacheFirst / LocalFirst strategies

### State Management (All Patterns)
- âœ… Global state via `DUIAppState()`
- âœ… Page-level state
- âœ… Component state
- âœ… Reactive updates with `StreamBuilder`
- âœ… Bidirectional sync (Native â†” Digia)

### Third-Party SDKs
- âœ… Firebase Analytics (event tracking)
- âœ… Firebase Auth (login/logout)
- âœ… Gokwik Payment (checkout flow)
- âœ… Firebase Messaging (push notifications)
- âœ… Sentry (crash reporting)
- âœ… Dio (HTTP client with env-based URLs)
- âœ… Shared Preferences (local storage)

### Advanced Features
- âœ… Custom widgets registration
- âœ… Environment variables
- âœ… Custom resources (icons, images, fonts)
- âœ… Message bus for Native â†” Digia communication
- âœ… Analytics integration
- âœ… Deep linking support

## ğŸš€ Quick Start

### Prerequisites
- Flutter SDK â‰¥ 2.18.0
- Digia Studio account and access key
- Firebase project (optional, for analytics/auth)

### Installation

1. **Navigate to the project directory:**
   ```bash
   cd /Users/ram/Digia/product_hub
   ```

2. **Install dependencies:**
   ```bash
   flutter pub get
   ```

3. **Configure access key:**
   
   Option A: Use dart-define (recommended):
   ```bash
   flutter run --dart-define=DIGIA_ACCESS_KEY=your_access_key_here
   ```
   
   Option B: Edit `lib/config/app_config.dart`:
   ```dart
   static const String devAccessKey = 'YOUR_DEV_ACCESS_KEY';
   static const String prodAccessKey = 'YOUR_PROD_ACCESS_KEY';
   ```

4. **Run the app:**
   ```bash
   # Debug mode (default)
   flutter run
   
   # With specific environment
   flutter run --dart-define=ENV=staging
   
   # Production mode
   flutter run --dart-define=ENV=prod --dart-define=DIGIA_ACCESS_KEY=prod_key
   ```

## ğŸ“‹ Integration Modes

### Mode 1: Full Digia App
Entire app UI managed by Digia Studio. Perfect for maximum flexibility and OTA updates.

```dart
// Set in lib/config/app_config.dart
static const IntegrationMode mode = IntegrationMode.fullDigia;
```

**Features:**
- All screens loaded from Digia Studio
- Zero native UI code
- Complete OTA update capability

### Mode 2: Hybrid Mode
Mix of native Flutter screens and Digia pages. Best for gradual migration or specific native requirements.

```dart
static const IntegrationMode mode = IntegrationMode.hybrid;
```

**Features:**
- Native splash/onboarding
- Digia-powered catalog, search, product pages
- Native profile/settings
- Seamless navigation between native and Digia

### Mode 3: Component Embedding
Native Flutter app embedding specific Digia components. Ideal for enhancing existing apps.

```dart
static const IntegrationMode mode = IntegrationMode.componentEmbedding;
```

**Features:**
- Fully native app structure
- Digia components for specific widgets (product cards, filters, etc.)
- Maximum control over app architecture

## ğŸ¨ Example Flows

### State Bridging Example

**From Native to Digia:**
```dart
// After user logs in
DUIAppState().setValue('user', {
  'id': user.id,
  'name': user.name,
  'email': user.email,
  'avatar': user.avatarUrl,
});
DUIAppState().setValue('isLoggedIn', true);
```

**From Digia to Native:**
```dart
// Listen to cart updates
DUIAppState().listen('cartCount', (count) {
  setState(() => _cartBadgeCount = count);
});
```

### Payment Flow via Message Bus

**In Digia Studio (Action):**
```json
{
  "action": "callExternalMethod",
  "channel": "start_payment",
  "data": {
    "amount": "${totalPrice}",
    "orderId": "${orderId}"
  }
}
```

**In Native Code:**
```dart
class AppMessageBus implements MessageBus {
  @override
  void send(String channel, dynamic message) async {
    if (channel == 'start_payment') {
      final result = await GokwikPaymentAdapter().startPayment(message);
      DUIAppState().setValue('paymentResult', result);
    }
  }
}
```

### Custom Widget Registration

```dart
// Register native widgets for use in Digia
DigiaUIOptions(
  customWidgets: {
    'native_map': (data) => GoogleMapWidget(location: data['location']),
    'native_chart': (data) => ChartWidget(data: data['chartData']),
  },
)
```

## ğŸ”§ Flavor Configuration

### Development (Debug)
```bash
flutter run --dart-define=ENV=dev --dart-define=BRANCH=main
```
- Real-time updates from server
- Hot reload support
- Branch-specific testing

### Staging
```bash
flutter run --dart-define=ENV=staging
```
- Stable configuration for QA
- Pre-production testing
- Remote updates enabled

### Production (Release)
```bash
# 1. Download assets from Digia Studio
# 2. Place in app/assets/
# 3. Build:
flutter build apk --release --dart-define=ENV=prod --dart-define=DIGIA_ACCESS_KEY=prod_key

# Or use script:
./scripts/build-release.sh
```

## ğŸ“ Project Structure

```
product_hub/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # Entry point with mode switching
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ app_config.dart          # App configuration & flavor helper
â”‚   â”‚   â”œâ”€â”€ digia_config.dart        # Digia initialization logic
â”‚   â”‚   â””â”€â”€ environment.dart         # API endpoints per environment
â”‚   â”œâ”€â”€ dummy_adapters/
â”‚   â”‚   â”œâ”€â”€ analytics_adapter.dart   # Firebase Analytics integration
â”‚   â”‚   â”œâ”€â”€ auth_adapter.dart        # Firebase Auth integration
â”‚   â”‚   â”œâ”€â”€ message_bus_adapter.dart # Message bus implementation
â”‚   â”‚   â””â”€â”€ payment_adapter.dart     # Gokwik payment integration
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ splash_screen.dart       # Native splash
â”‚   â”‚   â”œâ”€â”€ onboarding_screen.dart   # Native onboarding
â”‚   â”‚   â”œâ”€â”€ native_cart_screen.dart  # Hybrid: Native + Digia components
â”‚   â”‚   â””â”€â”€ profile_screen.dart      # Native profile
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ api_service.dart         # API client with Dio
â”‚   â”‚   â”œâ”€â”€ auth_service.dart        # Authentication service
â”‚   â”‚   â””â”€â”€ storage_service.dart     # Local storage wrapper
â”‚   â””â”€â”€ widgets/                     # Reusable native widgets
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ app_config.json              # Digia config (download from Studio)
â”‚   â””â”€â”€ functions.json               # JS functions (download from Studio)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ getting-started.md           # Setup guide
â”‚   â”œâ”€â”€ flavors-guide.md             # Flavor configuration details
â”‚   â”œâ”€â”€ state-management.md          # State patterns explained
â”‚   â”œâ”€â”€ third-party-sdks.md          # SDK integration guides
â”‚   â””â”€â”€ troubleshooting.md           # Common issues
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ build-debug.sh               # Build debug variant
â”‚   â”œâ”€â”€ build-staging.sh             # Build staging variant
â”‚   â””â”€â”€ build-release.sh             # Build production release
â”œâ”€â”€ pubspec.yaml
â””â”€â”€ README.md                        # This file
```

## ğŸ“š Documentation

- [Getting Started Guide](docs/getting-started.md) - Detailed setup instructions
- [Flavors Guide](docs/flavors-guide.md) - Environment and flavor configuration
- [State Management](docs/state-management.md) - State patterns and examples
- [Third-Party SDKs](docs/third-party-sdks.md) - SDK integration guides
- [Troubleshooting](docs/troubleshooting.md) - Common issues and solutions

## ğŸ”— Links

- [Digia Documentation](../../../jargon/sdk-integration-flutter/getting-started.md)
- [Digia Studio](https://app.digia.tech)
- [Flutter Documentation](https://flutter.dev/docs)

## ğŸ“„ License

This example is provided for demonstration purposes. See LICENSE for details.

## ğŸ’¬ Support

- ğŸ“§ Email: admin@digia.tech
- ğŸ“– Docs: https://docs.digia.tech
